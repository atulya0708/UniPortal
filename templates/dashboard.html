<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Mastery | Pillar III & IV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --sidebar: #1e293b;
            --accent: #8b5cf6;
            --success: #10b981;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            transition: 0.3s;
        }

        /* DARK MODE */
        body.dark-mode {
            background-color: #0f172a;
            color: #e2e8f0;
        }

        .dark-mode .card,
        .dark-mode .ledger-container,
        .dark-mode .stat-card,
        .dark-mode table {
            background-color: #1e293b;
            color: #e2e8f0;
        }

        .dark-mode .sidebar {
            background-color: #020617;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 260px;
            background: var(--sidebar);
            height: 100vh;
            color: white;
            position: fixed;
            padding: 20px;
            box-sizing: border-box;
        }

        .sidebar h2 {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 15px;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }

        .nav-item {
            padding: 12px;
            display: block;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .nav-item:hover,
        .nav-item.active {
            background: #334155;
            color: white;
        }

        .nav-item i { margin-right: 10px; }

        .main-content {
            margin-left: 260px;
            padding: 40px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .stat-card h5 {
            margin: 0;
            color: #64748b;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .stat-card p {
            margin: 10px 0 0;
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e293b;
        }

        .dashboard-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .assignment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border-top: 5px solid #cbd5e1;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .card.exam {
            border-top-color: #8b5cf6;
            background: #faf5ff;
        }

        .ledger-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            height: fit-content;
        }

        .task-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
        }

        th {
            background: #f8fafc;
            color: #64748b;
            font-size: 0.8rem;
        }
    </style>
</head>

<body>

<div class="sidebar">
    <h2>PILLAR III & IV</h2>

    <!-- Toggle Button -->
    <button onclick="toggleMode()" 
        style="margin-bottom:15px;width:100%;padding:8px;border:none;border-radius:6px;cursor:pointer;">
        üåô / ‚òÄÔ∏è Toggle Mode
    </button>

    <div class="nav-item active" onclick="showTab('calendar')">
        <i class="fas fa-calendar-days"></i> Chronos Calendar
    </div>

    <div class="nav-item" onclick="showTab('vault')">
        <i class="fas fa-vault"></i> Vault of Knowledge
    </div>

    <a href="/opportunities" class="nav-item">
        <i class="fas fa-briefcase"></i> Professor's Call
    </a>

    <div class="nav-item" onclick="showTab('support')">
        <i class="fas fa-circle-question"></i> Support Center
    </div>

    <a href="/logout" class="nav-item" style="margin-top:50px;color:#ef4444;">
        <i class="fas fa-right-from-bracket"></i> Logout
    </a>
</div>

<div class="main-content">
    <h1>Academic Mastery</h1>
    <p style="color:#64748b;margin-bottom:30px;">
        Welcome, <strong>{{ roll_no }}</strong>
    </p>

    <div class="stats-grid">
        <div class="stat-card"><h5>Current Credits</h5><p>{{ stats.total_credits }}</p></div>
        <div class="stat-card"><h5>Registered Courses</h5><p>{{ stats.total_courses }}</p></div>
        <div class="stat-card"><h5>Avg. Attendance</h5><p>{{ stats.avg_attendance }}%</p></div>
    </div>

    <div id="calendar" class="tab-content active">
        <h3>Assignments</h3>
        <div class="assignment-grid">
            {% for task in assignments %}
            <div class="card">
                <h4>{{ task.task_name }}</h4>
                <p>{{ task.deadline }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
function toggleMode() {
    document.body.classList.toggle("dark-mode");

    if (document.body.classList.contains("dark-mode")) {
        localStorage.setItem("theme", "dark");
    } else {
        localStorage.setItem("theme", "light");
    }
}

window.onload = function () {
    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
    }
};

function showTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
}
</script>

</body>
</html>
